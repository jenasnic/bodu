{#
    Allows to list all videos available. It allows to add/edit/delete video.
    Required :
    - menuList : list of all videos available (as Video).
#}

{% extends "::admin.html.twig" %}

{% block header %}

    <link rel="stylesheet" type="text/css" href="{{ asset('resources/css/lib/jquery-ui-1.10.4.custom.css') }}" />

    <script type="text/javascript" src="{{ asset('resources/scripts/lib/jquery-ui-1.10.4.custom.min.js') }}"></script>
    <script type="text/javascript">

        $(document).ready(function() {
            $("#video-list").sortable({
                update: function(event, ui) {
                    $("#ordered-video-list").val($('#video-list').sortable('serialize'));
                }
            });
            $("#video-list").disableSelection();
        });

    </script>

{% endblock %}

{% block body %}

    <h1>Gestion des vidéos</h1>

    <a class="link-button" href="{{ path('bodu_video_bo_edit') }}">
        <img width="16" height="16" border="0" title="Ajouter une vidéo" alt="Ajouter" src="{{ asset('resources/images/admin/add.png') }}" />
        <span>Ajouter une vidéo</span>
    </a>

    <div class="sep-15"></div>

    {# Display all menu found #}
    <table class="bo-table bo-sortable-table">

        <thead>
            <tr>
                <th class="bo-table-id">ID</th>
                <th class="bo-table-label">Libellé</th>
                <th class="bo-table-action"><img src="{{ asset('resources/images/admin/edit.png') }}" width="16" height="16" border="0" alt="Modifier" title="Modifier" /></th>
                <th class="bo-table-action"><img src="{{ asset('resources/images/admin/delete.png') }}" width="16" height="16" border="0" alt="Supprimer" title="Supprimer" /></th>
            </tr>
        </thead>

        <tbody id="video-list">
        {% for video in videoList %}
            <tr id="video-list-{{ video.id }}">
                <td class="bo-table-id">{{ video.id }}</td>
                <td class="bo-table-label {% if not video.published %}disabled{% endif %}">{{ video.name }}</td>
                <td class="bo-table-action">
                    <a href="{{ path('bodu_video_bo_edit', { 'id': video.id }) }}" >
                        <img src="{{ asset('resources/images/admin/edit.png') }}" width="16" height="16" border="0" alt="Modifier" title="Modifier" />
                    </a>
                </td>
                <td class="bo-table-action">
                    <a href="{{ path('bodu_video_bo_delete', { 'id': video.id }) }}" onclick="return confirm('Confirmer la suppression ?');" >
                        <img src="{{ asset('resources/images/admin/delete.png') }}" width="16" height="16" border="0" alt="Supprimer" title="Supprimer" />
                    </a>
                </td>
            </tr>
        {% endfor %}
        </tbody>

    </table>

    <div class="sep-20"></div>

    {# Form to save menu order #}
    <form action="{{ path('bodu_video_bo_list') }}" method="post">
        <input id="ordered-video-list" name="ordered-video-list" type="hidden" value="" />
        <input type="submit" class="button" value="Enregistrer" />
    </form>

{% endblock %}
